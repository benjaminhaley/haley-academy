(function(p,f,q){f.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookieStore","$window","$log",function(m,n,h,r){var g="undefined"===typeof h.localStorage?q:h.localStorage,d="undefined"!==typeof g;if(d){var k="__"+Math.round(1E7*Math.random());try{localStorage.setItem(k,k),localStorage.removeItem(k)}catch(p){d=!1}}var l={parseValue:function(b){var a;try{a=f.fromJson(b),"undefined"===typeof a&&(a=b),"true"===a&&(a=!0),"false"===a&&(a=!1),h.parseFloat(a)!==a||f.isObject(a)||
(a=h.parseFloat(a))}catch(c){a=b}return a}},e={set:function(b,a){if(!d)try{return n.put(b,a),a}catch(c){r.log("Local Storage not supported, make sure you have angular-cookies enabled.")}var e=f.toJson(a);g.setItem(b,e);return l.parseValue(e)},get:function(b){if(!d)try{return l.parseValue($.cookie(b))}catch(a){return null}b=g.getItem(b);return l.parseValue(b)},remove:function(b){if(!d)try{return n.remove(b),!0}catch(a){return!1}g.removeItem(b);return!0},bind:function(b,a,c){var g={defaultValue:"",
storeName:""};c=f.isString(c)?f.extend({},g,{defaultValue:c}):f.isUndefined(c)?g:f.extend(g,c);var d=c.storeName||a;e.get(d)||e.set(d,c.defaultValue);m(a).assign(b,e.get(d));b.$watch(a,function(a){f.isDefined(a)&&e.set(d,a)},!0);return e.get(d)},unbind:function(b,a,c){c=c||a;m(a).assign(b,null);b.$watch(a,function(){});e.remove(c)},clearAll:function(){g.clear()}};return e}])})(window,window.angular);